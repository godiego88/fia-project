# ============================================================
# Non-Triviality Index (NTI) — LOCKED SYSTEM CONTRACT
# Source: FIA_Project_Execution_Specification_v1.1_FINAL
# ============================================================

version: "1.0"
locked: true
description: >
  Composite Non-Triviality Index combining Quant, Stress,
  Narrative, Persistence, and Flow signals.
  All components normalized to [0,1].
  Missing components invalidate NTI.

# -----------------------------
# Component Weights (EXPLICIT)
# -----------------------------
weights:
  quant: 0.30        # Q — aggregated quantitative stress/regime signals
  stress: 0.20       # S — realized volatility × positioning stress
  narrative: 0.20    # N — NLP relevance, burst, sentiment, conflict
  persistence: 0.15  # P — run-to-run signal durability
  flow: 0.15         # F — market participation / liquidity / volume flow

# -----------------------------
# Normalization Rules
# -----------------------------
normalization:
  range_min: 0.0
  range_max: 1.0
  enforce_clipping: true
  allow_missing_components: false

# -----------------------------
# Trigger Thresholds (LOCKED)
# -----------------------------
trigger:
  nti_min_value: 0.72
  required_consecutive_runs: 2

# -----------------------------
# Validation Rules
# -----------------------------
validation:
  require_all_components: true
  fail_on_missing_weight: true
  fail_on_schema_drift: true
  fail_on_non_finite_values: true

# -----------------------------
# Output Expectations
# -----------------------------
output_schema:
  nti:
    type: float
    required: true
  components:
    quant:
      type: float
      required: true
    stress:
      type: float
      required: true
    narrative:
      type: float
      required: true
    persistence:
      type: float
      required: true
    flow:
      type: float
      required: true
  qualifies:
    type: boolean
    required: true
